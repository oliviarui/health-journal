import React, { Component } from "react";
const d = new Date();
class Home extends Component {
  initialState = {
    streak: 0,
    date: d.getFullYear() + "-" + d.getMonth() + "-" + d.getDate(),
  };
  componentDidMount() {
    this.checkStreak();
    this.searchHistory();
  }
  render() {
    if (sessionStorage.getItem("user") === null) {
      window.location.href = "/login";
    }
    return (
      <div className="home">
        <div className="banner">
          <a href="logout">
            <svg
              id="logout-btn"
              width="123"
              height="132"
              viewBox="0 0 123 132"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect
                x="46"
                y="5"
                width="59"
                height="78"
                rx="5"
                stroke="#D9D9D9"
                stroke-width="10"
              />
              <rect
                x="10"
                y="29"
                width="84"
                height="29"
                fill="#D9D9D9"
                stroke="#8B9781"
                stroke-width="10"
              />
              <path
                d="M0 44L30.75 19.7513L30.75 68.2487L0 44Z"
                fill="#D9D9D9"
              />
              <path
                d="M31.7554 99.1818V121H28.57V99.1818H31.7554ZM42.9335 121.33C41.3994 121.33 40.0606 120.979 38.9172 120.276C37.7737 119.572 36.8859 118.589 36.2538 117.325C35.6217 116.06 35.3057 114.583 35.3057 112.893C35.3057 111.195 35.6217 109.711 36.2538 108.44C36.8859 107.168 37.7737 106.181 38.9172 105.478C40.0606 104.775 41.3994 104.423 42.9335 104.423C44.4676 104.423 45.8064 104.775 46.9498 105.478C48.0933 106.181 48.9811 107.168 49.6132 108.44C50.2453 109.711 50.5613 111.195 50.5613 112.893C50.5613 114.583 50.2453 116.06 49.6132 117.325C48.9811 118.589 48.0933 119.572 46.9498 120.276C45.8064 120.979 44.4676 121.33 42.9335 121.33ZM42.9442 118.656C43.9385 118.656 44.7623 118.393 45.4157 117.868C46.0692 117.342 46.5521 116.643 46.8646 115.769C47.1842 114.896 47.344 113.933 47.344 112.882C47.344 111.838 47.1842 110.879 46.8646 110.006C46.5521 109.125 46.0692 108.418 45.4157 107.886C44.7623 107.353 43.9385 107.087 42.9442 107.087C41.9427 107.087 41.1118 107.353 40.4513 107.886C39.7979 108.418 39.3113 109.125 38.9917 110.006C38.6792 110.879 38.523 111.838 38.523 112.882C38.523 113.933 38.6792 114.896 38.9917 115.769C39.3113 116.643 39.7979 117.342 40.4513 117.868C41.1118 118.393 41.9427 118.656 42.9442 118.656ZM60.9777 127.477C59.678 127.477 58.5594 127.307 57.6219 126.966C56.6915 126.625 55.9316 126.174 55.3421 125.613C54.7526 125.052 54.3122 124.438 54.021 123.77L56.759 122.641C56.9507 122.953 57.2064 123.283 57.526 123.631C57.8527 123.987 58.2931 124.288 58.847 124.537C59.4081 124.786 60.129 124.91 61.0097 124.91C62.2171 124.91 63.2149 124.615 64.0033 124.026C64.7916 123.443 65.1858 122.513 65.1858 121.234V118.017H64.9834C64.7916 118.365 64.5146 118.752 64.1524 119.178C63.7973 119.604 63.3073 119.974 62.6823 120.286C62.0573 120.599 61.2441 120.755 60.2426 120.755C58.95 120.755 57.7852 120.453 56.7483 119.849C55.7185 119.239 54.9017 118.34 54.298 117.154C53.7014 115.961 53.4031 114.494 53.4031 112.754C53.4031 111.014 53.6979 109.523 54.2874 108.28C54.884 107.037 55.7007 106.085 56.7377 105.425C57.7746 104.757 58.95 104.423 60.2639 104.423C61.2796 104.423 62.0999 104.594 62.7249 104.935C63.3499 105.268 63.8364 105.659 64.1844 106.107C64.5395 106.554 64.8129 106.948 65.0047 107.289H65.2391V104.636H68.3605V121.362C68.3605 122.768 68.0338 123.923 67.3804 124.825C66.727 125.727 65.8428 126.394 64.7277 126.827C63.6198 127.261 62.3698 127.477 60.9777 127.477ZM60.9458 118.113C61.8619 118.113 62.6361 117.9 63.2682 117.474C63.9074 117.04 64.3904 116.423 64.7171 115.62C65.0509 114.81 65.2178 113.841 65.2178 112.712C65.2178 111.611 65.0544 110.641 64.7277 109.803C64.401 108.965 63.9216 108.312 63.2895 107.843C62.6574 107.367 61.8762 107.129 60.9458 107.129C59.9869 107.129 59.1879 107.378 58.5487 107.875C57.9095 108.365 57.4266 109.033 57.0999 109.878C56.7803 110.723 56.6205 111.668 56.6205 112.712C56.6205 113.784 56.7838 114.725 57.1105 115.535C57.4372 116.344 57.9202 116.977 58.5594 117.431C59.2057 117.886 60.0012 118.113 60.9458 118.113ZM79.5253 121.33C77.9912 121.33 76.6524 120.979 75.509 120.276C74.3655 119.572 73.4777 118.589 72.8456 117.325C72.2135 116.06 71.8975 114.583 71.8975 112.893C71.8975 111.195 72.2135 109.711 72.8456 108.44C73.4777 107.168 74.3655 106.181 75.509 105.478C76.6524 104.775 77.9912 104.423 79.5253 104.423C81.0594 104.423 82.3982 104.775 83.5416 105.478C84.6851 106.181 85.5729 107.168 86.205 108.44C86.8371 109.711 87.1531 111.195 87.1531 112.893C87.1531 114.583 86.8371 116.06 86.205 117.325C85.5729 118.589 84.6851 119.572 83.5416 120.276C82.3982 120.979 81.0594 121.33 79.5253 121.33ZM79.536 118.656C80.5303 118.656 81.3541 118.393 82.0075 117.868C82.661 117.342 83.1439 116.643 83.4564 115.769C83.776 114.896 83.9358 113.933 83.9358 112.882C83.9358 111.838 83.776 110.879 83.4564 110.006C83.1439 109.125 82.661 108.418 82.0075 107.886C81.3541 107.353 80.5303 107.087 79.536 107.087C78.5345 107.087 77.7036 107.353 77.0431 107.886C76.3896 108.418 75.9031 109.125 75.5835 110.006C75.271 110.879 75.1148 111.838 75.1148 112.882C75.1148 113.933 75.271 114.896 75.5835 115.769C75.9031 116.643 76.3896 117.342 77.0431 117.868C77.7036 118.393 78.5345 118.656 79.536 118.656ZM101.074 114.214V104.636H104.271V121H101.138V118.166H100.968C100.592 119.04 99.9878 119.768 99.1569 120.35C98.333 120.925 97.3067 121.213 96.078 121.213C95.0269 121.213 94.0965 120.982 93.2868 120.521C92.4843 120.052 91.8522 119.359 91.3905 118.443C90.936 117.527 90.7087 116.394 90.7087 115.045V104.636H93.8941V114.661C93.8941 115.776 94.203 116.664 94.8209 117.325C95.4388 117.985 96.2414 118.315 97.2286 118.315C97.8252 118.315 98.4182 118.166 99.0077 117.868C99.6043 117.57 100.098 117.119 100.489 116.515C100.886 115.911 101.082 115.144 101.074 114.214ZM116.189 104.636V107.193H107.251V104.636H116.189ZM109.648 100.716H112.833V116.195C112.833 116.813 112.926 117.278 113.11 117.591C113.295 117.896 113.533 118.106 113.824 118.219C114.122 118.326 114.445 118.379 114.793 118.379C115.049 118.379 115.273 118.362 115.465 118.326C115.656 118.29 115.805 118.262 115.912 118.241L116.487 120.872C116.303 120.943 116.04 121.014 115.699 121.085C115.358 121.163 114.932 121.206 114.421 121.213C113.582 121.227 112.801 121.078 112.077 120.766C111.352 120.453 110.766 119.97 110.319 119.317C109.872 118.663 109.648 117.843 109.648 116.856V100.716Z"
                fill="#D9D9D9"
              />
            </svg>
          </a>
          <div className="logogo">
                    <svg width="175" height="80" viewBox="0 0 175 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M149 62V32C148.623 28.1905 145.83 22 137.679 22C129.981 22 126.208 23.619 125 32V62" stroke="#D9D9D9" strokeWidth="10"/>
                    <path d="M45 19V49C45.3774 52.8095 48.1698 59 56.3208 59C64.0189 59 67.7925 57.381 69 49V19" stroke="#D9D9D9" strokeWidth="10"/>
                    <path d="M23 19V67.5C22 73.5 16.5 74.5 14.5 74.5C12.5 74.5 5.4 75.1 5 67.5" stroke="#D9D9D9" strokeWidth="10"/>
                    <path d="M90 62V31.3246C90.1667 29.2476 92 24.5 98.5 24C102.611 23.6838 107.5 24 109 28.9281" stroke="#D9D9D9" strokeWidth="10"/>
                    <path d="M170 0V62" stroke="#D9D9D9" strokeWidth="10"/>
                    <circle cx="45" cy="5" r="5" fill="#D9D9D9"/>
                    <circle cx="69" cy="5" r="5" fill="#D9D9D9"/>
                    <circle cx="125" cy="5" r="5" fill="#D9D9D9"/>
                    <circle cx="150" cy="5" r="5" fill="#D9D9D9"/>
                    </svg>
          </div>
          <div className="newButton">
            <a href="/new">
              <svg
                id="new-button"
                width="95"
                height="124"
                viewBox="0 0 95 124"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g filter="url(#filter0_d_29_195)">
                  <path
                    d="M4 15C4 6.71573 10.7157 0 19 0H76C84.2843 0 91 6.71573 91 15V72C91 80.2843 84.2843 87 76 87H19C10.7157 87 4 80.2843 4 72V15Z"
                    fill="#94725B"
                  />
                  <circle
                    cx="20.1777"
                    cy="16.1777"
                    r="5.39256"
                    fill="#8B9781"
                  />
                  <circle cx="20.1777" cy="43.5" r="5.39256" fill="#8B9781" />
                  <circle
                    cx="20.1777"
                    cy="70.8223"
                    r="5.39256"
                    fill="#8B9781"
                  />
                  <line
                    x1="37.7935"
                    y1="41.752"
                    x2="73.7439"
                    y2="41.752"
                    stroke="#E0C9AD"
                    stroke-width="15"
                  />
                  <line
                    x1="55.0649"
                    y1="23.7626"
                    x2="55.0649"
                    y2="59.7131"
                    stroke="#E0C9AD"
                    stroke-width="15"
                  />
                </g>
                <path
                  d="M23.1949 106.284V116H20.0095V99.6364H23.067V102.3H23.2694C23.6459 101.433 24.2354 100.737 25.0379 100.212C25.8476 99.6861 26.8667 99.4233 28.0954 99.4233C29.2105 99.4233 30.1871 99.6577 31.0251 100.126C31.8632 100.588 32.5131 101.277 32.9747 102.193C33.4363 103.109 33.6672 104.242 33.6672 105.592V116H30.4818V105.975C30.4818 104.789 30.1729 103.862 29.555 103.195C28.9371 102.52 28.0883 102.183 27.0088 102.183C26.2702 102.183 25.6132 102.342 25.0379 102.662C24.4697 102.982 24.0187 103.45 23.6849 104.068C23.3582 104.679 23.1949 105.418 23.1949 106.284ZM44.9917 116.33C43.3795 116.33 41.991 115.986 40.8263 115.297C39.6686 114.601 38.7737 113.624 38.1416 112.367C37.5166 111.103 37.2041 109.622 37.2041 107.925C37.2041 106.249 37.5166 104.771 38.1416 103.493C38.7737 102.214 39.6544 101.217 40.7836 100.499C41.92 99.782 43.2481 99.4233 44.768 99.4233C45.6913 99.4233 46.5862 99.576 47.4527 99.8814C48.3192 100.187 49.0969 100.666 49.7858 101.32C50.4747 101.973 51.018 102.822 51.4158 103.866C51.8135 104.903 52.0123 106.163 52.0123 107.648V108.777H39.0045V106.391H48.8909C48.8909 105.553 48.7204 104.81 48.3795 104.164C48.0386 103.511 47.5592 102.996 46.9413 102.619C46.3305 102.243 45.6132 102.055 44.7893 102.055C43.8944 102.055 43.1132 102.275 42.4456 102.715C41.7851 103.148 41.2737 103.717 40.9115 104.42C40.5564 105.116 40.3788 105.872 40.3788 106.689V108.553C40.3788 109.647 40.5706 110.577 40.9541 111.344C41.3447 112.112 41.8881 112.697 42.5841 113.102C43.2801 113.5 44.0933 113.699 45.0237 113.699C45.6274 113.699 46.1778 113.614 46.675 113.443C47.1721 113.266 47.6018 113.003 47.964 112.655C48.3263 112.307 48.6032 111.877 48.795 111.366L51.8099 111.909C51.5684 112.797 51.1352 113.575 50.5102 114.242C49.8923 114.903 49.1146 115.418 48.1771 115.787C47.2467 116.149 46.1849 116.33 44.9917 116.33ZM59.0649 116L54.2496 99.6364H57.5415L60.7481 111.653H60.9079L64.1253 99.6364H67.4172L70.6132 111.6H70.773L73.9584 99.6364H77.2503L72.4456 116H69.1963L65.8724 104.185H65.6274L62.3035 116H59.0649Z"
                  fill="#94725B"
                />
                <defs>
                  <filter
                    id="filter0_d_29_195"
                    x="0"
                    y="0"
                    width="95"
                    height="95"
                    filterUnits="userSpaceOnUse"
                    color-interpolation-filters="sRGB"
                  >
                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                    <feColorMatrix
                      in="SourceAlpha"
                      type="matrix"
                      values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                      result="hardAlpha"
                    />
                    <feOffset dy="4" />
                    <feGaussianBlur stdDeviation="2" />
                    <feComposite in2="hardAlpha" operator="out" />
                    <feColorMatrix
                      type="matrix"
                      values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"
                    />
                    <feBlend
                      mode="normal"
                      in2="BackgroundImageFix"
                      result="effect1_dropShadow_29_195"
                    />
                    <feBlend
                      mode="normal"
                      in="SourceGraphic"
                      in2="effect1_dropShadow_29_195"
                      result="shape"
                    />
                  </filter>
                </defs>
              </svg>

              <svg
                id="paper"
                width="87"
                height="87"
                viewBox="0 0 87 87"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M0 15C0 6.71573 6.71573 0 15 0H72C80.2843 0 87 6.71573 87 15V72C87 80.2843 80.2843 87 72 87H15C6.71573 87 0 80.2843 0 72V15Z"
                  fill="white"
                />
                <line y1="19.6323" x2="87" y2="19.6323" stroke="#70868E" />
                <line y1="43.3595" x2="87" y2="43.3595" stroke="#70868E" />
                <line y1="66.3678" x2="87" y2="66.3678" stroke="#70868E" />
                <line x1="21.3513" x2="21.3513" y2="87" stroke="#D88C9A" />
              </svg>
            </a>
          </div>
        </div>
          
          <div class="row2">
          <div className="snapshot">
            <h1> 30 day snapshot </h1>
            <div id = "modules">
            <div id = "mood-avg"></div>
            <div className="streak" >
              <svg id="fire" width="127" height="183" viewBox="0 0 127 183" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M35.078 178.01C-28.4516 164.825 8.60731 71.424 35.078 26.3719C30.8777 63.2926 40.3283 78.2367 45.5787 81.0937C56.6045 85.3132 69.8617 28.7894 75.1121 0C70.9118 41.6676 84.7378 81.9727 92.1758 96.9168C101.627 100.609 107.927 72.0833 109.896 57.3589C140.873 118.014 122.803 155.594 109.896 166.802C75.7684 187.373 45.7975 182.845 35.078 178.01Z" fill="#D88C9A"/>
                <path d="M36.2923 120.527C27.0371 152.767 40.1486 171.449 47.8612 176.76C63.7271 188.006 86.6996 178.634 90.005 171.136C95.3763 158.953 93.8613 121.152 90.005 102.72C88.6829 123.714 79.5379 127.712 75.1307 127.088C69.8421 129.337 63.5618 94.2855 61.0828 76.4786C63.7271 110.968 55.0229 130.836 50.3402 136.46C45.0516 143.208 38.7713 128.65 36.2923 120.527Z" fill="#F2D0A9"/>
              </svg>

              <div id = "streak"></div>
            </div> 
            <div className="jurnls">
              <svg id="jurnl-icon" width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 15C0 6.71573 6.71573 0 15 0H135C143.284 0 150 6.71573 150 15V135C150 143.284 143.284 150 135 150H15C6.71573 150 0 143.284 0 135V15Z" fill="#94725B"/>
                <circle cx="27.8926" cy="27.8926" r="9.29752" fill="#ECEBE6"/>
                <circle cx="27.8926" cy="75" r="9.29752" fill="#ECEBE6"/>
                <circle cx="27.8926" cy="122.107" r="9.29752" fill="#ECEBE6"/>
              </svg>
              <div id = "num-jurnls"></div>
            </div>
            <div className="water">
            <svg id = "water-icon" width="122" height="158" viewBox="0 0 122 158" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M122 100.862C122 132.418 94.6894 158 61 158C27.3106 158 0 132.418 0 100.862C0 69.3057 27.3106 43.7242 61 43.7242C94.6894 43.7242 122 69.3057 122 100.862Z" fill="#70868E"/>
              <path d="M114.043 72.2931H7.95652L61 0L114.043 72.2931Z" fill="#70868E"/>
            </svg>
            <div id = "water-avg"></div>
          </div>
          </div>
          
          </div>
            <a href="/history">
              <svg
                id="history-btn"
                width="124"
                height="139"
                viewBox="0 0 124 139"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M104.357 41.4211L71.656 37.0934L104.131 8.43558L104.357 41.4211Z"
                  fill="#D9D9D9"
                />
                <path
                  d="M13.4927 122.284V132H10.3074V110.182H13.4501V118.3H13.6525C14.036 117.419 14.622 116.719 15.4103 116.201C16.1987 115.683 17.2285 115.423 18.4998 115.423C19.622 115.423 20.6021 115.654 21.4402 116.116C22.2853 116.577 22.9387 117.266 23.4004 118.183C23.8691 119.092 24.1035 120.228 24.1035 121.592V132H20.9181V121.975C20.9181 120.775 20.6092 119.844 19.9913 119.184C19.3734 118.516 18.514 118.183 17.4132 118.183C16.6603 118.183 15.9856 118.342 15.389 118.662C14.7995 118.982 14.3343 119.45 13.9934 120.068C13.6596 120.679 13.4927 121.418 13.4927 122.284ZM28.3542 132V115.636H31.5396V132H28.3542ZM29.9629 113.112C29.4089 113.112 28.9331 112.927 28.5353 112.558C28.1447 112.181 27.9494 111.734 27.9494 111.215C27.9494 110.69 28.1447 110.242 28.5353 109.873C28.9331 109.496 29.4089 109.308 29.9629 109.308C30.5169 109.308 30.9892 109.496 31.3798 109.873C31.7775 110.242 31.9764 110.69 31.9764 111.215C31.9764 111.734 31.7775 112.181 31.3798 112.558C30.9892 112.927 30.5169 113.112 29.9629 113.112ZM48.087 119.631L45.1999 120.143C45.0792 119.773 44.8874 119.422 44.6246 119.088C44.369 118.754 44.021 118.481 43.5806 118.268C43.1403 118.055 42.5898 117.948 41.9293 117.948C41.0273 117.948 40.2745 118.151 39.6708 118.555C39.0671 118.953 38.7653 119.468 38.7653 120.1C38.7653 120.647 38.9677 121.087 39.3725 121.421C39.7773 121.755 40.4308 122.028 41.3327 122.241L43.9322 122.838C45.4379 123.186 46.56 123.722 47.2987 124.447C48.0373 125.171 48.4066 126.112 48.4066 127.27C48.4066 128.25 48.1225 129.124 47.5543 129.891C46.9933 130.651 46.2085 131.247 45.1999 131.68C44.1985 132.114 43.0373 132.33 41.7163 132.33C39.8839 132.33 38.3888 131.94 37.2312 131.158C36.0735 130.37 35.3633 129.251 35.1005 127.803L38.1793 127.334C38.3711 128.136 38.7653 128.744 39.3619 129.156C39.9585 129.56 40.7362 129.763 41.695 129.763C42.739 129.763 43.5735 129.546 44.1985 129.113C44.8235 128.673 45.136 128.136 45.136 127.504C45.136 126.993 44.9442 126.563 44.5607 126.215C44.1843 125.867 43.6055 125.604 42.8242 125.427L40.0543 124.82C38.5273 124.472 37.3981 123.918 36.6665 123.158C35.9421 122.398 35.5799 121.435 35.5799 120.271C35.5799 119.305 35.8498 118.46 36.3896 117.735C36.9293 117.011 37.6751 116.446 38.6268 116.041C39.5785 115.629 40.6687 115.423 41.8974 115.423C43.6658 115.423 45.0579 115.807 46.0735 116.574C47.0891 117.334 47.7603 118.353 48.087 119.631ZM59.5474 115.636V118.193H50.6092V115.636H59.5474ZM53.0062 111.716H56.1916V127.195C56.1916 127.813 56.2839 128.278 56.4686 128.591C56.6532 128.896 56.8912 129.106 57.1824 129.219C57.4806 129.326 57.8038 129.379 58.1518 129.379C58.4075 129.379 58.6312 129.362 58.823 129.326C59.0147 129.29 59.1639 129.262 59.2704 129.241L59.8457 131.872C59.661 131.943 59.3983 132.014 59.0574 132.085C58.7164 132.163 58.2903 132.206 57.7789 132.213C56.9409 132.227 56.1596 132.078 55.4352 131.766C54.7108 131.453 54.1248 130.97 53.6774 130.317C53.2299 129.663 53.0062 128.843 53.0062 127.856V111.716ZM69.788 132.33C68.2539 132.33 66.9151 131.979 65.7717 131.276C64.6282 130.572 63.7404 129.589 63.1083 128.325C62.4762 127.06 62.1602 125.583 62.1602 123.893C62.1602 122.195 62.4762 120.711 63.1083 119.44C63.7404 118.168 64.6282 117.181 65.7717 116.478C66.9151 115.775 68.2539 115.423 69.788 115.423C71.3221 115.423 72.6609 115.775 73.8043 116.478C74.9478 117.181 75.8356 118.168 76.4677 119.44C77.0998 120.711 77.4158 122.195 77.4158 123.893C77.4158 125.583 77.0998 127.06 76.4677 128.325C75.8356 129.589 74.9478 130.572 73.8043 131.276C72.6609 131.979 71.3221 132.33 69.788 132.33ZM69.7987 129.656C70.793 129.656 71.6168 129.393 72.2702 128.868C72.9237 128.342 73.4066 127.643 73.7191 126.769C74.0387 125.896 74.1985 124.933 74.1985 123.882C74.1985 122.838 74.0387 121.879 73.7191 121.006C73.4066 120.125 72.9237 119.418 72.2702 118.886C71.6168 118.353 70.793 118.087 69.7987 118.087C68.7972 118.087 67.9663 118.353 67.3058 118.886C66.6523 119.418 66.1658 120.125 65.8462 121.006C65.5337 121.879 65.3775 122.838 65.3775 123.882C65.3775 124.933 65.5337 125.896 65.8462 126.769C66.1658 127.643 66.6523 128.342 67.3058 128.868C67.9663 129.393 68.7972 129.656 69.7987 129.656ZM80.9714 132V115.636H84.0502V118.236H84.2207C84.519 117.355 85.0446 116.663 85.7974 116.158C86.5574 115.647 87.4167 115.391 88.3755 115.391C88.5744 115.391 88.8088 115.398 89.0787 115.413C89.3556 115.427 89.5723 115.445 89.7285 115.466V118.513C89.6007 118.477 89.3734 118.438 89.0467 118.396C88.72 118.346 88.3933 118.321 88.0666 118.321C87.3137 118.321 86.6426 118.481 86.0531 118.8C85.4707 119.113 85.0091 119.55 84.6681 120.111C84.3272 120.665 84.1568 121.297 84.1568 122.007V132H80.9714ZM94.9966 138.136C94.5208 138.136 94.0875 138.097 93.6969 138.019C93.3063 137.948 93.0151 137.87 92.8233 137.785L93.5904 135.175C94.1728 135.331 94.6912 135.398 95.1458 135.377C95.6003 135.356 96.0016 135.185 96.3496 134.866C96.7047 134.546 97.0172 134.024 97.2871 133.3L97.6813 132.213L91.6941 115.636H95.1032L99.2473 128.335H99.4178L103.562 115.636H106.982L100.238 134.184C99.9256 135.036 99.5279 135.757 99.0449 136.347C98.562 136.943 97.9867 137.391 97.3191 137.689C96.6515 137.987 95.8773 138.136 94.9966 138.136Z"
                  fill="#D9D9D9"
                />
                <path
                  d="M97.4788 64.0765C93.1001 78.7623 81.0785 90.6844 65.0469 94.1825C41.5747 99.304 18.395 84.4279 13.2734 60.9558C8.15187 37.4837 23.028 14.3039 46.5001 9.18238C62.5317 5.68433 78.4269 11.5151 88.5252 23.042"
                  stroke="#D9D9D9"
                  stroke-width="15"
                />
                <line
                  x1="51"
                  y1="29"
                  x2="51"
                  y2="59"
                  stroke="#D9D9D9"
                  stroke-width="10"
                />
                <line
                  x1="76"
                  y1="57"
                  x2="46"
                  y2="57"
                  stroke="#D9D9D9"
                  stroke-width="10"
                />
              </svg>
            </a>
          </div>
      </div>
    );
  }
  searchHistory = () => {
    const d = new Date();
    // set start date to be a month before the current day and end date to be today
    const startDate =
      d.getFullYear() + "-" + (d.getMonth() - 1) + "-" + d.getDate();
    const endDate = d.getFullYear() + "-" + d.getMonth() + "-" + d.getDate();
    try {
      // fetch data from API
      fetch("/date-query", {
        method: "POST",
        headers: {
          "Content-type": "application/json",
          mode: "cors",
        },
        body: JSON.stringify({
          username: sessionStorage.getItem('user'),
          startDate: startDate,
          endDate: endDate,
        }),
      })
        .then((response) => response.json())
        .then((result) => {
          // DEBUG
          console.log(sessionStorage.getItem('user') + "'s history");
          console.log(result);
          let mood = result.mood
          let moodSum = 0;
          for(let i = 0; i < mood.length; i++) {
            moodSum += mood[i].moodScale
          }
          let moodAvg = moodSum/mood.length

          // DEBUG
          console.log('mood average: ' + moodAvg )
          document.getElementById("mood-avg").innerHTML = '<b> Average Mood: ' + moodAvg + "/10 </b>";
          let water = result.water
          let waterSum = 0;
          for(let i = 0; i < water.length; i++) {
            waterSum += water[i].amount
          }
          let waterAvg = waterSum/water.length
          // DEBUG
          console.log('water average: ' + waterAvg )
          document.getElementById("water-avg").innerHTML = 'Average water intake: ' + waterAvg + ' mL';
          // DEBUG
          console.log('number of journals in the past month: ' + result.journal.length);
          document.getElementById("num-jurnls").innerHTML = 'Number of jurnls: '+result.journal.length;
        });
    } catch (err) {
      //catch any errors
      console.log(err);
    }
  }
  checkStreak = () => {
    const today = new Date(
      d.getFullYear() + "-" + d.getMonth() + "-" + d.getDate()
    );
    // get yesterday's date
    const yesterday = new Date(
      today.getTime() - 24 * 60 * 60 * 1000
    ).toISOString();

    try {
      // fetch data from API
      fetch("/check-streak", {
        method: "POST",
        headers: {
          "Content-type": "application/json",
          mode: "cors",
        },
        body: JSON.stringify({
          username: sessionStorage.getItem("user"),
          today: today.toISOString(),
          yesterday: yesterday,
        }),
      })
        .then((response) => response.json())
        .then((result) => {
          // DEBUG
          console.log(sessionStorage.getItem("user") + "'s journal streaks");
          console.log(result);
          // display new streak value to user
          this.setState({ streak: result.streak });
          if(result.streak===1){
            document.getElementById("streak").innerHTML = "Jurnl streak: "+result.streak+" day";
          }
          else{
            document.getElementById("streak").innerHTML = "Jurnl streak: "+result.streak+" days";
          }
          
        });
    } catch (err) {
      //catch any errors
      console.log(err);
    }
  };
  logout = () => {
    // DEBUG
    // console.log(this.state)
    // this.props.handleSubmit(this.state)
    sessionStorage.removeItem("user");
    console.log(sessionStorage.getItem("user"));
  };
}

export default Home;
